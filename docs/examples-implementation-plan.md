# サンプル実装計画

## 概要

このドキュメントは、このリポジトリでNode-REDフローのサンプルを作成・管理するための計画を示します。サンプルは、様々なNode-REDの概念とユースケースの学習教材として役立ちます。

## ディレクトリ構造

```
examples/
├── README.md                    # サンプル概要と使用方法
├── basic/
│   ├── 01-hello-world/
│   │   ├── flow.json           # フロー定義
│   │   └── README.md           # 説明と手順
│   ├── 02-simple-timer/
│   │   ├── flow.json
│   │   └── README.md
│   └── 03-debug-output/
│       ├── flow.json
│       └── README.md
├── http/
│   ├── 01-simple-api/
│   │   ├── flow.json
│   │   └── README.md
│   └── 02-rest-client/
│       ├── flow.json
│       └── README.md
├── data-processing/
│   ├── 01-json-transform/
│   │   ├── flow.json
│   │   ├── README.md
│   │   └── sample-data.json    # サンプル入力データ（必要な場合）
│   └── 02-csv-parser/
│       ├── flow.json
│       ├── README.md
│       └── sample.csv
└── integration/
    └── 01-file-processing/
        ├── flow.json
        └── README.md
```

## カテゴリ

### 1. 基本（Basic）
- Hello Worldフロー
- タイマーベースのフロー
- デバッグ出力とログ記録
- Functionノードの基本
- Templateノードの使い方

### 2. HTTP
- シンプルなHTTP APIエンドポイント
- RESTクライアントリクエスト
- Webhookの処理
- HTTP認証
- クエリパラメータの処理

### 3. データ処理（Data Processing）
- JSON変換
- CSVパース
- データのフィルタリングとマッピング
- 配列操作
- 文字列操作

### 4. 連携（Integration）
- ファイルシステム操作
- 外部API連携
- データベース接続（必要に応じて）
- MQTTメッセージング
- メール通知

## インポート方法（オプション1：手動インポート）

ユーザーはNode-RED組み込みのインポート機能を使って手動でサンプルをインポートします。このアプローチは次の特徴があります：
- **シンプル**: 追加ツールが不要
- **柔軟性**: ユーザーが特定のフローを選択してインポート可能
- **安全**: 実行環境への自動変更なし
- **教育的**: ユーザーが標準的なNode-REDインポートプロセスを学べる

### インポート手順

1. `examples/` ディレクトリを参照
2. 目的のサンプルの `flow.json` ファイルを開く
3. JSON内容をコピー
4. Node-RED UIで：
   - ハンバーガーメニュー（☰）→ インポートをクリック
   - JSON内容を貼り付け
   - 「Import」をクリック
   - キャンバス上にフローを配置
   - 「Deploy」をクリック

## サンプルREADMEテンプレート

各サンプルには、以下の構造の `README.md` を含めます：

```markdown
# [サンプル名]

## 説明
このフローが何をするか、その目的の簡単な説明。

## 前提条件
- 必要なカスタムノードのリスト（ある場合）
- 必要な外部サービスやAPI
- 実行前に必要な設定

## 使用ノード
- ノードタイプ1（目的）
- ノードタイプ2（目的）
- ノードタイプ3（目的）

## インポート方法
1. `flow.json` の内容をコピー
2. Node-REDで、メニュー → インポートに移動
3. JSONを貼り付けてインポートをクリック
4. フローをデプロイ

## 設定
必要な設定の手順：
1. [ノード名]ノードをダブルクリック
2. [プロパティ]を[値]に設定
3. 完了をクリック

## 使い方
フローのトリガー方法と使用方法：
1. [トリガー方法]
2. [出力を確認する場所]
3. [期待される動作]

## 期待される出力
フローが生成する内容の説明または例。

## 学習ポイント
- 重要概念1: 説明
- 重要概念2: 説明
- 重要概念3: 説明

## バリエーション
学習目的でこのフローを変更・拡張する方法の提案。
```

## サンプルインデックス（examples/README.md）

メインの `examples/README.md` には以下を含めます：
- 利用可能なすべてのサンプルの概要
- カテゴリと難易度レベルのクイックリファレンステーブル
- 各サンプルへのリンク
- 一般的なインポート手順
- サンプル実行のための前提条件

### サンプルテーブル形式

| カテゴリ | サンプル | 難易度 | 説明 |
|----------|---------|--------|------|
| 基本 | 01-hello-world | 初級 | シンプルなinjectとdebugフロー |
| 基本 | 02-simple-timer | 初級 | 定期的なメッセージ生成 |
| HTTP | 01-simple-api | 中級 | 基本的なREST APIの作成 |

## 実装フェーズ

### フェーズ1: セットアップ
- [ ] `examples/` ディレクトリ構造の作成
- [ ] メイン `examples/README.md` の作成
- [ ] インポート手順のドキュメント化

### フェーズ2: 基本サンプル
- [ ] 01-hello-world
- [ ] 02-simple-timer
- [ ] 03-debug-output

### フェーズ3: HTTPサンプル
- [ ] 01-simple-api
- [ ] 02-rest-client

### フェーズ4: データ処理サンプル
- [ ] 01-json-transform
- [ ] 02-csv-parser

### フェーズ5: 連携サンプル
- [ ] 01-file-processing
- [ ] 必要に応じて追加サンプル

## ファイル命名規則

- **フローファイル**: 常に `flow.json` という名前
- **ドキュメント**: 常に `README.md` という名前
- **サンプルデータ**: 説明的な名前（例: `sample-data.json`, `test-input.csv`）
- **ディレクトリ**: 小文字とハイフン、順序付けのために番号付き（例: `01-hello-world`）

## ベストプラクティス

1. **サンプルを焦点化**: 各サンプルは1つの概念を明確に示すこと
2. **段階的な複雑さ**: 学習の進行をガイドするために番号を付ける
3. **コメントを含める**: フローの重要なポイントを説明するためにCommentノードを使用
4. **徹底的にテスト**: すべてのサンプルが新規Node-REDインストールで動作することを確認
5. **依存関係をドキュメント化**: 必要なカスタムノードや外部サービスを明確に記述
6. **サンプルデータを提供**: 該当する場合はテストデータファイルを含める
7. **説明的なノード名を使用**: ユーザーが一目でフローを理解できるようにする

## 品質チェックリスト

新しいサンプルを追加する前に確認：
- [ ] `flow.json` が有効でテスト済み
- [ ] `README.md` がテンプレートに従っている
- [ ] すべての前提条件がドキュメント化されている
- [ ] フローに明確化のためのコメントノードが含まれている
- [ ] サンプルが `examples/README.md` にリストされている
- [ ] ノード名が説明的である
- [ ] 必要に応じてサンプルデータファイルが含まれている

## 今後の機能拡張

将来的な改善案：
- サンプルに難易度評価を追加
- 複雑なサンプルのビデオウォークスルーを作成
- フローの自動テストを追加
- Webベースのカタログビューアーを作成
- READMEにトラブルシューティングセクションを追加
- 大規模フローのパフォーマンス考慮事項を含める
